<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>freshFarmOrganics • Contact</title>
    <link rel="stylesheet" href="/css/styles.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>
<section class="contact-wrap">
    <h1 class="page-section-title">Contact Us</h1>
    <p class="contact-subtitle">We’d love to hear from you. Visit, call, or send us a message.</p>

    <div class="contact-card">
        <div class="contact-grid">
            <!-- LEFT: Contact form -->
            <form class="contact-col" th:action="@{/contact_us}" th:object="${contactForm}" method="post" novalidate>
<!--                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>-->
                <input type="hidden" sec:csrfInput=""/>

                <div class="form-field">
                    <label for="name">Name</label>
                    <input id="name" type="text" th:field="*{name}" maxlength="120" required autocomplete="name"/>
                    <div class="form-error" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">Name error</div>
                </div>

                <div class="form-field">
                    <label for="email">Email</label>
                    <input id="email" type="email" th:field="*{email}" maxlength="255" required autocomplete="email"/>
                    <div class="form-error" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">Email error</div>
                </div>

                <div class="form-field">
                    <label for="phone">Phone <span class="hint">(optional)</span></label>
                    <input id="phone" type="text" th:field="*{phone}" maxlength="40" placeholder="+44 20 7946 0123" autocomplete="tel"/>
                    <div class="form-error" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}">Phone error</div>
                </div>

                <div class="form-field">
                    <label for="subject">Subject</label>
                    <input id="subject" type="text" th:field="*{subject}" maxlength="200" required/>
                    <div class="form-error" th:if="${#fields.hasErrors('subject')}" th:errors="*{subject}">Subject error</div>
                </div>

                <div class="form-field">
                    <label for="message">Message</label>
                    <textarea id="message" rows="7" th:field="*{message}" maxlength="255" required
                              oninput="document.getElementById('msgCount').textContent=this.value.length + ' / 5000'"></textarea>
                    <div class="form-row space-between">
                        <span id="msgCount" class="hint">0 / 5000</span>
                        <span class="form-error" th:if="${#fields.hasErrors('message')}" th:errors="*{message}">Message error</span>
                    </div>
                </div>

                <div class="form-row">
                    <button type="submit" class="add-to-basket">Send message</button>
                    <button type="reset" class="btn-outline">Clear</button>
                </div>

                <div th:if="${contactSuccess}" class="contact-alert contact-alert-success" th:text="${contactSuccess}">
                    Thanks!
                </div>
            </form>

            <!-- RIGHT: Address + Map -->
            <div class="contact-col">
                <h2 class="section-subtitle">Our Address</h2>
                <p>
                    FreshFarm Organics<br/>
                    Batley Rd<br/>
                    Wakefield WF2 0SB, United Kingdom<br/>
                    Phone: +44 20 7946 0123<br/>
                    Email: <a href="mailto:hello@farmfreshorganics.co.uk">hello@farmfreshorganics.co.uk</a>
                </p>

                <div class="map-embed" aria-label="Map: Batley Rd, Wakefield WF2 0SB">
                    <iframe
                            title="FreshFarm Organics Location"
                            loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade"
                            src="https://www.google.com/maps?q=Batley%20Rd%2C%20Wakefield%20WF2%200SB&hl=en&z=16&output=embed"
                            allowfullscreen>
                    </iframe>
                </div>

                <h3 class="section-subtitle">Opening Hours</h3>
                <p>
                    Mon–Fri: 09:00–18:00<br/>
                    Sat: 10:00–16:00<br/>
                    Sun: Closed
                </p>
            </div>
        </div>
    </div>
</section>
<div th:replace="~{fragments/footer :: footer}"></div>
<script>
    (function () {
        var ta = document.getElementById('message');
        var c  = document.getElementById('msgCount');
        if (ta && c) { c.textContent = (ta.value.length || 0) + ' / 5000'; }
    })();
</script>
</body>
</html>
